## 面向切面

在软件开发中，散布于应用中多出的功能被称为横切关注点(cross-cutting concern)。通常来说这些横切关注点都是与应用的业务逻辑相分离的(与实际的业务不相关，但是又需要有，比如日志和事务)。把这些横切关注点与业务逻辑相分离正是面向切面编程(Aop)所要解决的问题。

#### 什么是面向切面编程

切面能够帮助我们模块化横切关注点。

横切关注点是在应用中影响多个模块的功能。比如安全，事务，日志。

##### 切面术语

- 通知(advice):定义切面是什么，描述切面要完成什么工作
  - Spring中切面可以应用5种类型的通知
    - 前置通知(Before):在目标方法被调用之前调用的方法
    - 后置通知(After):在目标方法完成之后调用方法，此时不会关心方法的输出是什么
    - 返回通知(After-returning):在目标方法完成执行之后调用方法
    - 异常通知(After-throwing):在目标方法抛出异常后调用方法
    - 环绕通知(Around):前后都执行
- 连接点(join point):辅助模块的服务时机
- 切点(Poincut):服务对象
- 织入(Weaving):织入是把切面应用到目标对象并创建新的代理对象的过程。

#### spring的AOP支持

Spring提供了4种类型的AOP支持：

- 基于代理的经典Spring AOP
- 纯POJO切面
- @AspectJ注解驱动的切面
- 注入式AspectJ切面

因为Spring的AOP基于动态代理，所以Spring只支持方法作为切点。无法创建细粒度的通知，例如拦截对象字段的修改，也无法在创建bean时应用通知。

方法拦截可以满足绝大部分需求，如果需要字段或构造器拦截，则需要使用AspectJ。



